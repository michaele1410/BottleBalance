{% extends "base.html" %}
{% block content %}
<div class="card shadow-sm">
  <div class="card-body">
    <h1 class="h5 mb-3">{{ _('Edit user') }}: {{ user.username }}</h1>
    <form method="post">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

      <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-envelope"></i></span>
        <div class="form-floating flex-grow-1">
          <input type="email" name="email"  inputmode="text" class="form-control"
            placeholder="{{ _('Email') }}" value="{{ user.email or '' }}">
            <label for="email">{{ _('Email') }}</label>
        </div>
      </div>

      <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-key"></i></span>
        <div class="form-floating flex-grow-1">
          <input type="password" name="password"  inputmode="text" class="form-control"
            placeholder="{{ _('Enter new password') }}" value="">
            <label for="password">{{ _('Enter new password (optional)') }}</label>
        </div>
      </div>

      <div class="input-group mb-3">
        <span class="input-group-text"><i class="bi bi-shield-check"></i></span>
        <div class="form-floating flex-grow-1">
          <select name="role" class="form-select" required>
            {% for r in roles %}
            <option value="{{ r }}" {% if user.role==r %}selected{% endif %}>{{ r }}</option>
            {% endfor %}
          </select>
          <label for="role">{{ _('Role') }}</label>
        </div>
      </div>

      <div class="form-check mb-2">
        <input class="form-check-input" type="checkbox" name="active" id="active" {% if user.active %}checked{% endif %}>
        <label class="form-check-label" for="active">{{ _('Active') }}</label>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" name="can_approve" id="can_approve" {% if user.can_approve
          %}checked{% endif %}>
        <label class="form-check-label" for="can_approve">{{ _('May approve payment requests') }}</label>
      </div>

      <a href="{{ url_for('user_routes.users_list') }}" class="btn btn-secondary">{{ _('Cancel') }}</a>
      <button type="submit" class="btn btn-primary">{{ _('Save') }}</button>
    </form>
  </div>
</div>
{% endblock %}