/*=========================================
   Haupt-Container Anpassungen
   ========================================= */

/* Nur für Tablets (Bootstrap md-Bereich: 768px–991px) */
@media (min-width: 768px) and (max-width: 991px) {
  main.container {
    max-width: 90%; /* statt fester Pixelbreite, prozentual für Flexibilität */
  }
}

/* =========================================
   Allgemeine Tabellen & Layout
   ========================================= */
.table td, .table th {
  vertical-align: middle;
}



/* Chart-Canvas – nur für Sparklines gezielt */
.sparkline-container canvas {
  width: 100% !important;
  height: 100% !important;    /* volle Höhe der Box */
  max-height: none !important;
}

/* Karte streckbar machen und Card-Body den Rest einnehmen lassen */
.card.h-100 { 
  display: flex; 
  flex-direction: column; 
}
.card.h-100 .card-body { 
  flex: 1 1 auto; 
  display: flex;            /* damit der Chart-Container sich strecken kann */
}

/* Sparkline-Container füllt Card-Body */
.sparkline-container { 
  flex: 1 1 auto; 
  display: flex; 
  min-height: 140px;        /* Basishöhe; nach Bedarf anpassen */
}

/* Bootstrap .ratio für volle Höhe statt aspektbasiertem Padding nutzen */
.sparkline-ratio { 
  --bs-aspect-ratio: auto;  /* Aspect-Ratio aus */
  position: relative;
  height: 100%; 
  width: 100%;
}
/* Absicherung: Canvas soll die Ratio-Box komplett füllen */
.sparkline-ratio > * {
  position: absolute;
  inset: 0;
}

/* --- Korrigiere außerdem die bisherigen fehlerhaften Regeln --- */

/* Vorher: globaler canvas-Selector
canvas { width: 100%; height: auto; max-height: 100% !important!; }
→ Entferne ihn oder ersetze ihn durch die gezielte Regel oben */

/* Vorher in deiner Datei (Syntaxfehler):
max-height: 100% !important!;
→ korrekt wäre: max-height: 100% !important; (ohne zweites !) */

/* Chart-Canvas */
/*canvas {
  width: 100%;
  height: auto;
  max-height: 100% !important;
}*/

/* =========================================
   Farbvariablen (Light/Dark)
   ========================================= */
:root {
  --bg-color: #ffffff;
  --text-color: #000000;
}
[data-bs-theme="dark"] {
  --bg-color: #121212;
  --text-color: #e0e0e0;
}
body {
  background-color: var(--bg-color);
  color: var(--text-color);
}

/* =========================================
   Logos & Branding
   ========================================= */
.logo-img {
  height: 80px;
  width: auto;
  vertical-align: middle;
}
.logo-wrapper svg {
  height: 28px !important;
  width: auto !important;
  vertical-align: middle;
}
.navbar-brand {
  font-size: 1.5rem;
}

/* =========================================
   Animationen
   ========================================= */
.error-card {
  animation: fadeIn 0.6s ease-in-out;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* =========================================
   Dark-Mode Cards
   ========================================= */
[data-bs-theme="dark"] .card {
  background-color: #2c2f33;
  color: #f8f9fa;
}

/* Flatpickr Dark Mode */
:root[data-bs-theme="dark"] .flatpickr-calendar {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  border: 1px solid var(--bs-border-color);
}

/* =========================================
   Responsive Layout
   ========================================= */
.row.g-3 > [class*="col-"] {
  flex: 0 0 auto;
}

/* Sparkline-Höhensteuerung über Bootstrap .ratio */
/*.sparkline-ratio { --bs-aspect-ratio: 100%; } */

/*@media (max-width: 768px) {
  .sparkline-ratio { --bs-aspect-ratio: 100%; }
  #sparklineInv, #sparklineKas { height: 80px !important; }
}*/

/* =========================================
   Formular-Buttons (BottleBalance)
   ========================================= */
#transaction-form .btn.btn-success.flex-grow-1 {
  transition: opacity .15s ease-in-out, filter .15s ease-in-out;
}
#transaction-form .btn.btn-success.flex-grow-1:disabled,
#transaction-form .btn.btn-success.flex-grow-1[aria-disabled="true"] {
  opacity: .55;
  cursor: not-allowed;
  box-shadow: none !important;
  filter: grayscale(25%);
}
#transaction-form .btn.btn-success.flex-grow-1:not(:disabled):hover {
  filter: brightness(1.03);
}
#transaction-form .btn.btn-success.flex-grow-1:not(:disabled):focus-visible {
  outline: 2px solid rgba(25, 135, 84, .5);
  outline-offset: 2px;
}
@supports (color: color-mix(in srgb, #000, #fff)) {
  #transaction-form .btn.btn-success.flex-grow-1:not(:disabled):focus-visible {
    outline: 2px solid color-mix(in srgb, var(--bs-success), transparent 50%);
  }
}
@media (prefers-reduced-motion: reduce) {
  #transaction-form .btn.btn-success.flex-grow-1 {
    transition: none;
  }
}
/* Spinner beim Absenden */
#transaction-form.is-submitting .btn.btn-success.flex-grow-1 {
  position: relative;
  pointer-events: none;
}
#transaction-form.is-submitting .btn.btn-success.flex-grow-1 i.bi-plus-lg {
  visibility: hidden;
}
#transaction-form.is-submitting .btn.btn-success.flex-grow-1::after {
  content: "";
  position: absolute;
  inset-inline-start: .75rem;
  top: 50%;
  width: 1rem; height: 1rem;
  margin-top: -.5rem;
  border: .15em solid currentColor;
  border-right-color: transparent;
  border-radius: 50%;
  animation: bb-spin .6s linear infinite;
}
@keyframes bb-spin { to { transform: rotate(360deg); } }

/* =========================================
   Kompakte Formulare
   ========================================= */
.form-compact .form-label { font-size: .9rem; margin-bottom: .25rem; }
.form-compact .input-group-text { padding: .375rem .5rem; }

@media (min-width: 768px) {
  .form-compact .form-control,
  .form-compact .form-select {
    min-width: 8em;   /* Mindestbreite */
    max-width: 12rem;  /* maximale Breite */
  }
}
/* =========================================
   Flatpickr Dark Mode
   ========================================= */
.flatpickr-dark {
  background: #2b2b2b;
  color: #fff;
}
.flatpickr-dark .flatpickr-day {
  color: #fff;
}

/* =========================================
   Admin-Tools Styling
   ========================================= */
.card {
  border-radius: .5rem;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}
.card-header {
  font-weight: 600;
  font-size: 1rem;
  background-color: var(--bs-light);
}
[data-bs-theme="dark"] .card-header {
  background-color: #343a40;
  color: #f8f9fa;
}
textarea#options {
  font-family: monospace;
  resize: vertical;
}
.btn i {
  vertical-align: middle;
}
.alert {
  border-radius: .375rem;
  font-size: .95rem;
}

/* =========================================
   Status Badges – Zahlungsfreigabe
   ========================================= */

/* Farb-Variablen – leicht anpassbar */
:root {
  --bb-status-offen:         #ffc107; /* Gelb */
  --bb-status-on-hold:       #6c757d; /* Grau */
  --bb-status-freigegeben:   #0d6efd; /* Blau */
  --bb-status-abgelehnt:     #dc3545; /* Rot */
  --bb-status-zurueckgezogen:#fd7e14; /* Orange */
  --bb-status-abgeschlossen: #198754; /* Grün */
  --bb-status-unknown:       #0dcaf0; /* Cyan/Info */
}

/* Einheitliche Badge-Basis */
.badge {
  font-size: .85rem;
  font-weight: 600;
  padding: .45em .6em;
  letter-spacing: .01em;
  vertical-align: middle;
}

/* Fokus sichtbarer (A11y) */
.badge:focus-visible {
  outline: 2px solid rgba(13,110,253,.5);
  outline-offset: 2px;
}

/* Einzelne Status-Farben */
.badge-status-offen {
  background-color: var(--bb-status-offen);
  color: #212529; /* dunkler Text auf Gelb */
}
.badge-status-on_hold {
  background-color: var(--bb-status-on-hold);
  color: #fff;
}
.badge-status-freigegeben {
  background-color: var(--bb-status-freigegeben);
  color: #fff;
}
.badge-status-abgelehnt {
  background-color: var(--bb-status-abgelehnt);
  color: #fff;
}
.badge-status-zurueckgezogen {
  background-color: var(--bb-status-zurueckgezogen);
  color: #fff;
}
.badge-status-abgeschlossen {
  background-color: var(--bb-status-abgeschlossen);
  color: #fff;
}

/* Fallback für unbekannte/neue Statuswerte */
.badge-status-unknown,
.badge-status-Unbekannt,
.badge-status-default {
  background-color: var(--bb-status-unknown);
  color: #08222a;
}

/* Mini-Statuspunkt (optional) */
.status-dot {
  display: inline-block;
  width: .5rem;
  height: .5rem;
  border-radius: 50%;
  vertical-align: middle;
  margin-right: .35rem;
  background-color: var(--bb-status-unknown);
}
.status-dot.offen          { background-color: var(--bb-status-offen); }
.status-dot.on_hold        { background-color: var(--bb-status-on-hold); }
.status-dot.freigegeben    { background-color: var(--bb-status-freigegeben); }
.status-dot.abgelehnt      { background-color: var(--bb-status-abgelehnt); }
.status-dot.zurueckgezogen { background-color: var(--bb-status-zurueckgezogen); }
.status-dot.abgeschlossen  { background-color: var(--bb-status-abgeschlossen); }

/* Button/Tabellen-Feinschliff bei Aktionsleisten */
.table td .btn { margin: 2px; }
.table th, .table td { white-space: nowrap; }

@media (max-width: 576px) {
  .table td .btn {
    font-size: 0.75rem;
    padding: 0.2rem 0.35rem;
    white-space: normal;
    word-break: break-word;

  }
}

/* =========================================
   Responsive Tabellen
   ========================================= */
.table-responsive {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch; /* sanftes Scrollen auf iOS */
}

/* Stacked Layout für Smartphones */
@media (max-width: 576px) {
  table.table thead {
    display: none; /* Kopf ausblenden */

  }
  table.table tr {
    display: block;
    margin-bottom: 1rem;
    border: 1px solid #dee2e6;
    border-radius: .5rem;
    padding: .5rem;
    background: var(--bg-color);
  }
  table.table td {
    display: flex;
    justify-content: space-between;
    padding: .25rem .5rem;
    font-size: .9rem;
    border-bottom: 1px solid #eee;
    white-space: normal;
    word-break: break-word;

  }
  table.table td:last-child {  
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: 0.25rem;

  }
  table.table td::before {
    content: attr(data-label);
    font-weight: 600;
    color: var(--text-color);
    margin-right: .5rem;
  }

  /* Zellen mit Defaultwert im Stacked Layout ausblenden */
  table.table td[data-default="true"] {
      display: none;
  }

}

/* Stacked Layout für Tablets */
@media (max-width: 768px) {
  .table-stacked thead { display: none !important; }
  .table-stacked tbody, .table-stacked tr { display: block !important; }
  .table-stacked tr {
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 1rem;
    border: 1px solid #dee2e6;
    border-radius: .5rem;
    padding: .75rem;
    background: var(--bg-color);
  }

  .table-stacked td {
    display: flex;
    justify-content: space-between;
    padding: .25rem .5rem;
    font-size: .9rem;
    border-bottom: 1px solid #eee;
    white-space: normal;
    word-break: break-word;
  }
  
  .table-stacked td.text-end {
      display: flex !important;
      justify-content: space-between !important; /* Label links, Buttons rechts */
      gap: .5rem;
      border-bottom: 0;
  }

  /* Buttons in Aktionen rechtsbündig */
  .table-stacked td.text-end .btn {
    margin-left: auto; /* schiebt Buttons nach rechts */
  }

  .table-stacked td::before {
    content: attr(data-label);
    font-weight: 600;
    color: var(--text-color);
    margin-right: .5rem;
  }
  .table-stacked td[data-default="true"] {
    display: none !important;
  }

  /* "NEW" Badge in Stacked Tabellen */
  .table-stacked td.has-new {
    position: relative;
    padding-right: 3.2rem;
  }
  /* "NEW" Badge Stil */
  .table-stacked td.has-new::after {
    content: "NEW";
    position: absolute;
    top: .25rem;
    right: .25rem;
    font-size: .65rem;
    font-weight: 700;
    padding: .15rem .35rem;
    border-radius: .25rem;
    background-color: var(--bs-success);
    color: #fff;
    letter-spacing: .04em;
  }

  .card-header { font-size: .95rem; }
  textarea#options { font-size: .9rem; }

  /* Entferne die harte Mobile-Höhe – erlaubt volles Ausbreiten */
  .sparkline-ratio { --bs-aspect-ratio: auto; }
  /* Falls du eine Mindesthöhe auf Mobile willst, nutze min-height statt height: */
  /* .sparkline-container { min-height: 120px; } */
  /* Entfernen / Überschreiben der bisherigen fixen Höhe: */
  #sparklineInv, #sparklineKas { height: 100% !important; }
}
/* =========================================
   "Zurück nach oben" Button
   ========================================= */
  .to-top-btn {
    position: fixed;
    right: 1rem;
    bottom: 1rem;
    z-index: 1080; /* über Modals/Toasts (Bootstrap nutzt 1060–1080) */
    box-shadow: var(--bs-box-shadow);
    /* optional: runder Button */
    border-radius: 9999px;
    width: 3rem;
    height: 3rem;
    padding: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  @media (max-width: 575.98px) {
    .to-top-btn {
      right: .75rem;
      bottom: .75rem;
      width: 2.75rem;
      height: 2.75rem;
    }
  }
  