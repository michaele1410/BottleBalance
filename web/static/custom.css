/* Tabellen */
.table td, .table th { vertical-align: middle; }

/* Chart-Canvas */
canvas {
  width: 100%;
  height: auto;
  max-height: 100%;
}

/* Farbvariablen (Light/Dark) */
:root {
  --bg-color: #ffffff;
  --text-color: #000000;
}
[data-bs-theme="dark"] {
  --bg-color: #121212;
  --text-color: #e0e0e0;
}
body {
  background-color: var(--bg-color);
  color: var(--text-color);
}

/* Logos */
.logo-img { height: 80px; width: auto; vertical-align: middle; }
.logo-wrapper svg { height: 28px !important; width: auto !important; vertical-align: middle; }
.navbar-brand { font-size: 1.5rem; }

/* Animationen */
.error-card { animation: fadeIn 0.6s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

/* Dark-Mode Cards */
[data-bs-theme="dark"] .card { background-color: #2c2f33; color: #f8f9fa; }

/* Flatpickr Dark Mode */
:root[data-bs-theme="dark"] .flatpickr-calendar {
  background-color: var(--bs-body-bg);
  color: var(--bs-body-color);
  border: 1px solid var(--bs-border-color);
}

/* =========================================================
   Responsive Layout
   ========================================================= */

/* Sicherstellen, dass Bootstrap-Grid greift */
.row.g-3 > [class*="col-"] {
  flex: 0 0 auto;
}

/* Sparkline-Höhensteuerung über Bootstrap .ratio */
.sparkline-ratio { --bs-aspect-ratio: 100%; }

/* Mobile: Charts flacher */
@media (max-width: 768px) {
  .sparkline-ratio { --bs-aspect-ratio: 40%; }
  #sparklineInv, #sparklineKas { height: 80px !important; }
}

/* ---------- BottleBalance: Formular-Submit-Button (global) ---------- */

    /* Sanfte Übergänge; wird bei reduced-motion abgeschaltet */
    #transaction-form .btn.btn-success.flex-grow-1 {
      transition: opacity .15s ease-in-out, filter .15s ease-in-out;
    }

    /* Deutlich erkennbarer "deaktiviert"-Zustand */
    #transaction-form .btn.btn-success.flex-grow-1:disabled,
    #transaction-form .btn.btn-success.flex-grow-1[aria-disabled="true"] {
      opacity: .55;                /* sichtbarer als Bootstrap-Default */
      cursor: not-allowed;         /* klarer Hinweis */
      box-shadow: none !important; /* keine Fokus-Schattierung im disabled */
      filter: grayscale(25%);      /* dezente Entsättigung */
    }

    /* Aktiver Zustand: kleine Hover-/Focus-Affordanzen */
    #transaction-form .btn.btn-success.flex-grow-1:not(:disabled):hover {
      filter: brightness(1.03);
    }
    #transaction-form .btn.btn-success.flex-grow-1:not(:disabled):focus-visible {
      /* Fallback-Farbe für Outline (Bootstrap Success ~ #198754) */
      outline: 2px solid rgba(25, 135, 84, .5);
      outline-offset: 2px;
    }
    /* Theme-aware via CSS-Variablen, falls verfügbar */
    @supports (color: color-mix(in srgb, #000, #fff)) {
      #transaction-form .btn.btn-success.flex-grow-1:not(:disabled):focus-visible {
        outline: 2px solid color-mix(in srgb, var(--bs-success), transparent 50%);
      }
    }

    /* Bewegungseinstellungen respektieren */
    @media (prefers-reduced-motion: reduce) {
      #transaction-form .btn.btn-success.flex-grow-1 {
        transition: none;
      }
    }

    /* ---------- Optionaler Spinner beim Absenden ---------- */
    #transaction-form.is-submitting .btn.btn-success.flex-grow-1 {
      position: relative;
      pointer-events: none;   /* Keine doppelten Klicks */
    }
    #transaction-form.is-submitting .btn.btn-success.flex-grow-1 i.bi-plus-lg {
      visibility: hidden;     /* Plus-Icon ausblenden, Text bleibt sichtbar */
    }
    #transaction-form.is-submitting .btn.btn-success.flex-grow-1::after {
      content: "";
      position: absolute;
      inset-inline-start: .75rem; /* links vom Text (rtl/ltl-aware mit logical property) */
      top: 50%;
      width: 1rem; height: 1rem;
      margin-top: -.5rem;
      border: .15em solid currentColor;
      border-right-color: transparent;
      border-radius: 50%;
      animation: bb-spin .6s linear infinite;
    }

    @keyframes bb-spin { to { transform: rotate(360deg); } }